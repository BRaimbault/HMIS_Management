<h2>{{ 'AVAILABLE_DATA' | translate}}</h2>

<div class="row">
    <div class="col-md-3">
        <div class="input-group">
            <span class="input-group-addon" id="last-months-label">Show last months: </span>
            <input ng-model="lastMonths" type="text" class="form-control" placeholder="Number of last months..."
                    aria-describedby="last-months-label" size="4">
        </div>
    </div>
    <button class="btn btn-default" ng-click="loadTable()"><span class="glyphicon glyphicon-refresh"></span></button>
</div>

<br>

<d2-progressbar></d2-progressbar>

<table ng-show="tableLoaded" class="table table-bordered table-condensed table-hover">
    <thead>
    <tr>
        <th class="orgunit">{{ 'ORGANISATIONUNIT_LABEL' | translate}}</th>
        <th ng-repeat="pe in periods">{{pe}}</th>
    </tr>
    </thead>
    <tbody>
        <tr ng-repeat="orgunit in tableRows" ng-click="clickOrgunit(orgunit)"
                ng-show="{{ orgunit.relativeLevel == 0 || (orgunit.parents) }}">
            <td class="level{{ orgunit.level }}" style="text-indent: {{orgunit.relativeLevel}}em">{{orgunit.name}}</td>
            <td ng-repeat="period in orgunit.data" title="users: {{period.others}} || migration: {{period.pentaho}}"
                    style="background-color: rgb({{255 - (255 * period.others / (period.others + period.pentaho)) | number: 0}}, 255,0)">
                {{100 * period.others / (period.others + period.pentaho) | number: 0}} %</td>
        </tr>
    </tbody>
</table>