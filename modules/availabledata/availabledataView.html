
<!--   
   Copyright (c) 2015.
 
   This file is part of Project Manager.
 
   Project Manager is free software: you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
 
   Project Manager is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.
 
   You should have received a copy of the GNU General Public License
   along with Project Manager.  If not, see <http://www.gnu.org/licenses/>. -->

<h2>{{ 'AVAILABLE_DATA' | translate}}
	<button class="btn btn-default" ng-click="showSettings()">Settings <span class="glyphicon glyphicon-cog"></span></button>
</h2>

<table class="table table-bordered table-condensed table-hover" ng-show="tableDisplayed">
	<thead>
		<tr>
			<th class="orgunit">{{ 'ORGANISATIONUNIT_LABEL' | translate}}</th>
			<th ng-repeat="pe in periods">{{ pe.name }}</th>
		</tr>
	</thead>
	<tbody>
		<tr ng-repeat="ou in tableRows | orderBy:'fullName'" ng-show="{{ ou.relativeLevel == 0 || (ou.parents) }}"
				ng-click="!ou.isLastLevel && clickOrgunit(ou.id)">
			<td id="ou_{{ou.id}}" class="level{{ ou.level }}" style="text-indent: {{ou.relativeLevel}}em">
				<span class="ou-prefix glyphicon {{ou.isLastLevel ? 'glyphicon-chevron-right' :
						(ou.relativeLevel == 0 ? 'glyphicon-minus' : 'glyphicon-plus') }}"></span>
				{{ ou.name }}
			</td>
			<td ng-repeat="pe in periods" title="{{ou.name}} - {{pe.name}}">{{ou.data[pe.id] | number:0}}</td>
		</tr>
	</tbody>
</table>

<d2-progressbar></d2-progressbar>

<!-- Settings modal -->
<div class="modal" data-backdrop="static" id="availableDataSettings" role="dialog">
	<div class="modal-dialog">
		<div class="modal-content">
			<div class="modal-header">
				<h4 class="modal-title">Settings</h4>
			</div>
			<div class="modal-body">
				<div class="row">
					<div class="col-md-6">

					</div>
					<div class="col-md-6">
						<div class="panel panel-default">
							<div class="panel-body">
								<h4>Number of months:</h4>
								<div class="row">
									<div id="periodSelector" class="btn-group" data-toggle="buttons">
										<label ng-repeat="period in availablePeriods" id="{{period.key}}" class="btn btn-default">
											<input type="radio" name="options" autocomplete="off"> {{period.value}}
										</label>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
			<div class="modal-footer">
				<button type="button" class="btn btn-primary" ng-click="updateSettings()">{{ 'IMPORT' | translate }}</button>
			</div>
		</div>
	</div>
</div>